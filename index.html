<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏ú‡∏±‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏á‡∏≤‡∏ô Goodbye</title>

<style>
body {
  font-family: 'Segoe UI', sans-serif;
  text-align: center;
  margin: 0;
  padding: 30px;
  background: linear-gradient(135deg, #ff758c, #845ec2);
  color: #222;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å */
.container {
  background: #ffffffee;
  max-width: 900px;
  margin: auto;
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}

/* ‡πÄ‡∏ß‡∏ó‡∏µ */
.stage {
  width: 70%;
  max-width: 700px;
  height: 90px;
  margin: 20px auto 50px auto;
  background: linear-gradient(135deg, #111, #444);
  color: white;
  font-size: 22px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.4);
}

/* ‡πÅ‡∏ñ‡∏ß */
.row {
  margin-bottom: 30px;
}

.row-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}

/* ‡πÇ‡∏ï‡πä‡∏∞ */
.tables {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

button {
  width: 75px;
  height: 48px;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-weight: bold;
  background: #4CAF50;
  color: white;
  transition: all 0.2s ease;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

button:hover {
  transform: translateY(-3px);
  background: #43a047;
}

/* ‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß */
.booked {
  background: #e53935;
  cursor: not-allowed;
  box-shadow: none;
}

.booked:hover {
  transform: none;
}

/* ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ */
input {
  padding: 10px;
  width: 250px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 15px;
  margin-bottom: 20px;
}
</style>
</head>

<body>
<div class="container">

<h2>üéâ ‡∏ú‡∏±‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏à‡∏µ‡∏ô‡∏á‡∏≤‡∏ô Goodbye üéâ</h2>

‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:<br>
<input type="text" id="name" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">

<div class="stage">üé§ ‡πÄ‡∏ß‡∏ó‡∏µ (Stage)</div>

<div id="layout"></div>

</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw3hbLYmjgHkKSB5o9u5r7U4kyn3LUbQzz1Oqu_Am4-YQUVVq5n0BYEZKqwIJ1gD8dlPg/exec";

const layout = {
  A: ["A1","A2","A3","A4","A5"],
  B: ["B1","B2","B3","B4","B5"],
  C: ["C1","C2","C3","C4","C5"],
  D: ["D1","D2"]
};

let bookedTables = [];

function loadBookedTables() {
  fetch(SCRIPT_URL)
    .then(res => res.json())
    .then(data => {
      bookedTables = data;
      renderLayout();
    });
}

function renderLayout() {
  const container = document.getElementById("layout");
  container.innerHTML = "";

  for (const row in layout) {
    const rowDiv = document.createElement("div");
    rowDiv.className = "row";

    const title = document.createElement("div");
    title.className = "row-title";
    title.textContent = `‡πÅ‡∏ñ‡∏ß ${row}`;
    rowDiv.appendChild(title);

    const tablesDiv = document.createElement("div");
    tablesDiv.className = "tables";

    layout[row].forEach(table => {
      const btn = document.createElement("button");
      btn.textContent = table;

      if (bookedTables.includes(table)) {
        btn.classList.add("booked");
        btn.disabled = true;
      } else {
        btn.onclick = () => bookTable(table, btn);
      }

      tablesDiv.appendChild(btn);
    });

    rowDiv.appendChild(tablesDiv);
    container.appendChild(rowDiv);
  }
}

function bookTable(table, btn) {
  const name = document.getElementById("name").value.trim();
  if (!name) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á");
    return;
  }

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify({ name, table })
  })
  .then(res => res.text())
  .then(result => {
    if (result === "SUCCESS") {
      alert("üéâ ‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!");
      btn.classList.add("booked");
      btn.disabled = true;
    } else if (result === "TABLE_BOOKED") {
      alert("‡πÇ‡∏ï‡πä‡∏∞‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß");
      loadBookedTables();
    } else if (result === "ALREADY_BOOKED") {
      alert("1 ‡∏Ñ‡∏ô‡∏à‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà 1 ‡πÇ‡∏ï‡πä‡∏∞");
    }
  });
}

loadBookedTables();
</script>

</body>
</html>
